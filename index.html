<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chart with Download Link</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/0.4.1/html2canvas.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.4.0/jspdf.umd.min.js"></script>
    <style>
        /* Make the button text bold */
        #downloadPdf {
            font-weight: bold;
            color: steelblue;
        }
    </style>
</head>
<body>
    <div>
        <canvas id="myChart"></canvas>
    </div>

    <button id="downloadPdf" type="button">Download PDF</button>

    <script>
        const { jsPDF } = window.jspdf;
        const ctx = document.getElementById('myChart');

        new Chart(ctx, {
            type: 'radar',
            data: {
                labels: ['Neurotizismus', 'Extraversion', 'Offenheit', 'Vertraeglichkeit', 'Gewissenhaftigkeit'],
                datasets: [{
                    label: 'Individuelle FacettenausprÃ¤gung',
                    data: [3, 4, 2, 3, 4], // Set values for individual facet expression
                    fill: true,
                    backgroundColor: ['rgba(153, 102, 255, 0.2)'],
                    borderColor: ['rgba(153, 102, 255, 1)'],
                    borderWidth: 1.5
                }, {
                    label: 'Normwerte',
                    data: [2.74, 3.13, 3.27, 2.70, 2.70],
                    fill: true,
                    backgroundColor: ['rgba(75, 192, 192, 0.2)'],
                    borderColor: ['rgba(75, 192, 192, 1)'],
                    borderWidth: 1.5
                }]
            },
            options: {
                scales: {
                    r: {
                        min: 0,
                        max: 5,
                        pointLabels: {
                            font: {
                                size: 15
                            }
                        },
                        angleLines: {
                            display: false // Hide the lines connecting the center to the labels
                        },
                        ticks: {
                            stepSize: 1, // Set the step size for labels
                            callback: function(value, index, values) {
                                // Skip labels for specific values (e.g., 0 and 5)
                                if (value === 0) {
                                    return '';
                                }
                                return value;
                            }
                        }
                    }
                }
            }
        });

        document.getElementById('downloadPdf').addEventListener('click', function() {
            html2canvas(ctx).then(canvas => {
                const imgData = canvas.toDataURL('image/png', 1.0);
                const pdf = new jsPDF('p', 'mm', 'a4');
                const width = pdf.internal.pageSize.getWidth();
                const imgWidth = width - 40;
                const imgHeight = (canvas.height * imgWidth) / canvas.width;

                // Add header
                pdf.setFontSize(16);
                pdf.text("RC Study: Individuelle Auswertung Teil 1", 105, 10, { align: 'center' });
                pdf.setDrawColor(70, 130, 180); // Set color to steel blue
                pdf.setLineWidth(0.5);
                pdf.line(20, 12, 190, 12);

                // Add text content and image to PDF
                pdf.addImage(imgData, 'PNG', (width - imgWidth * 0.9) / 2, 20, imgWidth * 0.9, imgHeight * 0.72, 'NONE', 'FAST');
                pdf.save("[RC_Study]Ihre Auswertungsergebnisse Teil 1.pdf");
            });
        });
    </script>
</body>
</html>

